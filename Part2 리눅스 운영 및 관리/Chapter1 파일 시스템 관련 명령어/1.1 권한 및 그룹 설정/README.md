## 1.1 권한 및 그룹 설정(1)

### 퍼미션(Permission)  
파일에 어떠한 권한들을 설정할 수 있는지에 대해 살펴보도록 한다.
```
# ls -l
-rw-rw-r-x  1 icbs  project 1024  Aug 13  10:10 client.c
```
* r : read(읽기 가능)
* w : write(쓰기 가능)
* x : execute(실행 가능)  

### 사용자 구분
위 예와 같이 하나의 파일은 rwx 3개를 가지는데, 이것은 각각 **앞에서부터 owner, group, other** 사용자에게 적용되는 권한을 나타낸다.
위 예에서 **icbs는 이 파일의 owner**가 되고 다음에 나오는 **project가 이 파일의 group**이 된다.   
사용자가 파일에 접근할 때 **id가 icbs이면 첫 번째 권한**을 가지고, 사용자가 **project group에 속해 있다면 두 번째 권한**을 가지게 되고, **두 가지 경우가 아니면 other로서 세 번째 권한**을 가진다.

## 1.1 권한 및 그룹 설정(2)
### 권한 및 그룹 설정 관련 명령어
#### chmod(파일 권한 바꾸기)
각각의 파일에 주어진 접근권한을 바꿀 때 사용하는 명령어

* 서식
```
chmod [options] mode[,mode] file1[file2...]
chmod [options] 8진수mode[,]
chmod [options] [reference][operator][modes] [file]
```

* 주요 옵션  

|옵션|의미|
|------|---|
|-c, --changes|권한 변경이 올바른 파일들만 자세히 보여준다.|
|-f, --quite|중요한 오류가 아니라면 보여주지 않는다.|
|-v, --verbose|작업 진행상태를 자세하게 설명해준다.|
|**-R, -recursive**|**디렉터리 안에 있는 파일을 모두 변경한다.**|
|--version|버전 정보를 보여준다.|
|--help|도움말을 보여준다.|  

|reference(대상)|의미|
|------|---|
|u|user|
|g|group|
|o|other|
|a|all(위의 셋을 포함하는 모든 사용자)|

|operator|의미|
|------|---|
|+|해당 권한 추가|
|-|해당 권한 제거|
|=|해당 권한 설정한대로 변경|


|modes|의미|
|------|---|
|r|read 권한|
|w|write 권한|
|x|execute 권한|
|-|권한 없음|

* 사용예 
```
# ls -l client.c
-rw-r--r--  1 icbs  project 1024  Aug 22  01:22 client.c
# chmod 777 client.c : 모든사용자 rwx 가능
# ls -l cleint.c
-rwxrwxrwx  1 icbs proeject  1024  Aug 22  01:22 client.c
# chmod u+x cleint.c : user x 가능
# ls -l cleint.c
-rwxr--r--  1 icbs  project 1024  Aug 22  01:22 client.c
# chmod g-x client.c : group x 권한 삭제
# chmod -R 777 ./test_dir : test_dir 안의 모든 파일을 777로 권한 변경
```


#### chown(파일 소유자 변경)
파일의 소유자나 파일이 속한 그룹을 수정하는 명령어  
* 서식  
``` 
chown [options] USER[:GROUP] FILE(s)
```
* 주요 옵션  

|옵션|의미|
|------|---|
|-c, --changes|바뀐 파일들에 대해서만 자세히 보여준다.|
|-f, --quite|바뀌어지지 않는 파일에 대해서 오류메시지를 보여주지 않는다.|
|-v, --verbose|작업 진행상태를 자세하게 설명해준다.|
|**-R, -recursive**|**디렉터리 안에 있는 파일을 모두 변경한다.**|
|--version|버전 정보를 보여준다.|
|--help|도움말을 보여준다.|  

* 사용예
```
# ls -l client.c
-rw-r--r--  1 icbs  project 1024  Aug 22  01:22 client.c
chown hsi client.c
-rw-r--r--  1 hsi project 1024  Aug 22  01:22 client.c
```

#### chmod와 chown 심화학습  
* ls -l 예시
```
# drwxrwxrwx  2 icbs  project 1024  Aug 13  10:10 client.c
```

|파일속성|소유자(user)권한|그룹(group)권한|타인(others)권한|링크수(user)|소유자(group)|그룹사이즈|파일|작성월|작성일|시간|파일명|
|------|---|---|---|---|---|---|---|---|---|---|---|
|d|rwx|rwx|rwx|2|icbs|project|1024|Aug|13|10:10|client.c|

#### 1)파일속성
|문자|의미|
|------|---|
|-|일반파일|
|b|블록특수파일|
|d|디렉터리파일|
|c|문자특수파일|
|\||기호링크|  
* 일반파일 : 사용자가 볼 수 있는 파일들. 텍스트, 소스코드, 쉘스크립트 또는 실행 가능한 바이너리 프로그램 및 여러 가지 유형의 데이터를 포함
* 특수파일 : 디스크, 터미널, 프린터 등 리눅스 시스템과 연관되는 모든 실제 디바이스가 파일로 표현된 것이라고 생각하면 된다.
* 디렉터리파일 : 파일 및 디렉터리의 이름뿐 아니라 해당 파일 및 디렉터리에 대한 포인터가 들어 있는 파일
* 링크 : 실제로는 한 개가 존재하는 파일을 다른 곳에서도 쓸 수 있도록 논리적인 연결을 지어준 것

#### 2)권한
* 소유자(user) 권한 : 파일 소유자가 가지는 파일에 대한 속성
* 그룹(group) 권한 : 소유자와 같은 그룹에 속한 사람들의 파일에 대한 권한
* 타인(others) 권한 : 소유자와 같은 그룹에 속한 사람을 제외한 모든 사람들의 파일에 대한 권한    
권한 설정 시 아래 표와 같이 문자 또는 숫자(8진법)으로서 의미부여가 가능한데 8진수는 각 자리의 weight값을 더하면 된다.  
|소유자(owner)|그룹(group)|타인(others)|
|---|---|---|
|4 2 1|4 2 1|4 2 1|
|r w x|r w x|r w x|  

#### 3)링크수
* 현재 존재하는 파일이 다른 곳에서도 사용될수 있도록 링크된 개수

#### 4)소유자/그룹
* 파일의 소유자 및 소유자가 속한 그룹을 나타낸다.

#### 5)파일 관련 사항
* 파일 사이즈 및 만들어진 파일의 최종적으로 수정된 날짜와 파일명을 나타낸다.

### Chmod의 특수 목적 접근 모드
절대적인 퍼미션 표기 방식에서 일반적으로 3자리 표기법을 많이 사용하는데, 4자리 표기법에 사용되는 값을 나타내느 특수목적 접근 모드가 있다.  
|Code|비트명|절대적인 방법|의미|
|---|---|---|---|
|t|sticky bit|1000|실행 후에도 메모리를 점유하도록 설정|
|s|SetGID(Set Group ID)|2000|프로세스 실행 당시 GID로 설정|
|s|SetUID(Set User ID)|3000|프로세스 실행 당시 UID로 설정|  

이들 특수 목적 접근 모드 또한 Code와 절대적인 방법 모두를 사용할 수 있다.

* 사용예
```
# ls -l client.c
-rwx-r--r-- 1 icbs  project 1024  Aug 13  10:10 client.c
# chmod 1777 client.c
# ls -l client.c
-rwxrwxrwt  1 icbs  project 1024  Aug 13  10:10 client.c
```

## 1.1 권한 및 그룹 설정(3)
### umask(사용자 파일생성 매스크를 모드로 설정)
새로이 만들어지는 파일에 대한 파일 권한을 제한하는 기능을 하는 명령어
* 서식
```
umask [-S] [mode]
umask [8진수 값]
```  
* 사용법
모드가 숫자로 시작하면 8진수로 해석한다. 그렇지 않으면 chmod와 비슷한 심볼릭매스크로 해석한다.
모드를 생략하거나 -S 옵션을 적으면, 현재의 매스크 값을 출력한다.
-S옵션은 매스크 값을 심볼릭 형태로 출력하도록 한다. 기본 출력형태는 8진수 이다.
umask 값은 파일이 생성될 때 요구되는 허가권 설정을 제한하는 데 사용된다.
쉘의 기본적인 umask 값은 8진수 022이다.
umask 값 설정 비트(bit)들은 요청된 허가 설정 비트들과 mask된다. 
파일생성시 666으로 허가권을 요청하게 되면 요청된 허가권 666을 기본 umask 값인 022로 마스크하여 최종적인 허가권 644를 생성한다.  

||r|w|x|r|w|x|r|w|x|
|---|---|---|---|---|---|---|---|---|---|
|원래값|1|1|0|1|1|0|1|1|0|
|마스크|0|0|0|0|1|0|0|1|0|
|최종값|1|1|0|1|0|0|1|0|0|
